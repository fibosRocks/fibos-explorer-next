# FIBOS Explorer 页面重构规划

## 设计原则

1. **核心功能优先** - 高频使用的功能放在显眼位置
2. **减少层级** - 重要功能不超过2级导航
3. **场景聚合** - 相关功能归类到同一入口
4. **渐进式复杂** - 简单操作易触达，高级功能可折叠

---

## 页面结构规划

### 一级导航（主菜单）

| 序号 | 名称 | 路由 | 权重 | 说明 |
|------|------|------|------|------|
| 1 | 首页 | `/` | ★★★★★ | 数据概览、快速入口 |
| 2 | 浏览器 | `/explorer` | ★★★★★ | 区块、交易、账户查询 |
| 3 | 钱包 | `/wallet` | ★★★★★ | 核心交易功能 |
| 4 | 投票 | `/voting` | ★★★★☆ | BP投票、代理 |
| 5 | 节点 | `/nodes` | ★★★☆☆ | BP列表、监控 |

### 二级结构详解

```
/                           # 首页
├── 链概览（统计数据）
├── 最新区块
├── 最新交易
├── 快速搜索
└── 资源价格（RAM/CPU/NET）

/explorer                   # 浏览器
├── /blocks                 # 区块列表
│   └── /blocks/:id         # 区块详情
├── /transactions           # 交易列表
│   └── /transactions/:id   # 交易详情
├── /accounts/:id           # 账户详情
├── /contracts/:contract    # 合约详情
└── /publickey/:key         # 公钥查询

/wallet                     # 钱包（需登录）
├── /wallet/overview        # 资产概览（默认）
├── /wallet/transfer        # 转账
├── /wallet/resources       # 资源管理（RAM/CPU/NET）
├── /wallet/account         # 账户管理
└── /wallet/advanced        # 高级功能

/voting                     # 投票
├── /voting/producers       # 节点投票（默认）
├── /voting/proxy           # 代理投票
└── /voting/rewards         # 投票收益

/nodes                      # 节点
├── /nodes/producers        # BP列表
└── /nodes/monitor          # 节点监控
```

---

## 功能模块权重分析

### 第一梯队：核心高频功能（★★★★★）

用户几乎每次访问都会使用，必须在一级入口可见。

| 功能 | 原路径 | 新路径 | 使用频率 |
|------|--------|--------|----------|
| 搜索 | `/search` | 全局搜索框 | 极高 |
| 转账 | `/tools/transfer` | `/wallet/transfer` | 极高 |
| 账户详情 | `/accounts/:id` | `/explorer/accounts/:id` | 极高 |
| 交易详情 | `/transactions/:id` | `/explorer/transactions/:id` | 高 |
| 资产概览 | 状态栏 | `/wallet/overview` | 高 |

### 第二梯队：重要常用功能（★★★★☆）

需要明显入口，但不必在一级导航占位。

| 功能 | 原路径 | 新路径 | 归类 |
|------|--------|--------|------|
| BP投票 | `/voting` | `/voting/producers` | 投票 |
| 抵押/赎回 | `/tools/stake` | `/wallet/resources` | 钱包-资源 |
| RAM买卖 | `/tools/ram` | `/wallet/resources` | 钱包-资源 |
| 投票分红领取 | `/tools/votebonus` | `/voting/rewards` | 投票 |
| 区块列表 | `/blocks` | `/explorer/blocks` | 浏览器 |

### 第三梯队：常规功能（★★★☆☆）

正常使用场景，二级菜单可达。

| 功能 | 原路径 | 新路径 | 归类 |
|------|--------|--------|------|
| 创建账户 | `/tools/create` | `/wallet/account/create` | 钱包-账户 |
| 代理投票 | `/tools/proxy` | `/voting/proxy` | 投票 |
| BP列表 | `/producers` | `/nodes/producers` | 节点 |
| 锁仓解锁 | `/tools/unlockfo` | `/wallet/overview` (卡片) | 钱包 |
| 合约查看 | `/contracts/:contract` | `/explorer/contracts/:contract` | 浏览器 |

### 第四梯队：低频/高级功能（★★☆☆☆）

专业用户使用，可折叠或放入"更多"。

| 功能 | 原路径 | 新路径 | 归类 |
|------|--------|--------|------|
| 多签管理 | `/tools/multisig` | `/wallet/advanced/multisig` | 钱包-高级 |
| 合约调用 | `/tools/contract` | `/wallet/advanced/contract` | 钱包-高级 |
| Ledger连接 | `/tools/ledger` | `/wallet/advanced/ledger` | 钱包-高级 |
| 节点监控 | `/monitor` | `/nodes/monitor` | 节点 |
| 公钥查询 | `/publickey/:key` | `/explorer/publickey/:key` | 浏览器 |

### 第五梯队：边缘功能（★☆☆☆☆）

极少使用，可考虑隐藏或整合。

| 功能 | 原路径 | 处理建议 |
|------|--------|----------|
| RAM市场页 | `/ram` | 整合到 `/wallet/resources` |
| 设置 | `/settings` | 移到用户菜单 |
| 钱包介绍 | `/wallets` | 移到帮助文档 |
| 推荐链接 | `/links` | 移到 Footer |

---

## 钱包模块详细设计

### /wallet/overview - 资产概览（默认页）

```
┌─────────────────────────────────────────────────────┐
│  账户: fibosuser123                    [切换账户]   │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ │
│  │   可用余额   │  │   已抵押    │  │   锁仓中    │ │
│  │  1234.5678  │  │  500.0000   │  │  100.0000  │ │
│  │     FO      │  │     FO      │  │     FO     │ │
│  │             │  │             │  │  [解锁 →]  │ │
│  └─────────────┘  └─────────────┘  └─────────────┘ │
│                                                     │
│  ┌─────────────────────────────────────────────────┐│
│  │  资源使用情况                                   ││
│  │  RAM  ████████░░░░  8.5 KB / 12 KB             ││
│  │  CPU  ██░░░░░░░░░░  2.3 ms / 50 ms             ││
│  │  NET  █░░░░░░░░░░░  1.2 KB / 100 KB            ││
│  │                                    [管理资源]  ││
│  └─────────────────────────────────────────────────┘│
│                                                     │
│  ┌─────────────────────────────────────────────────┐│
│  │  快捷操作                                       ││
│  │  [转账]  [收款]  [资源管理]  [投票]            ││
│  └─────────────────────────────────────────────────┘│
│                                                     │
│  ┌─────────────────────────────────────────────────┐│
│  │  代币资产                                       ││
│  │  FO        1234.5678    @ eosio                ││
│  │  EOS       10.0000      @ eosio                ││
│  │  FOUSDT    500.000000   @ eosio                ││
│  └─────────────────────────────────────────────────┘│
│                                                     │
│  ┌─────────────────────────────────────────────────┐│
│  │  最近交易                           [查看全部]  ││
│  │  2024-01-15 转账给 account1   -100 FO          ││
│  │  2024-01-14 收到 account2     +50 FO           ││
│  └─────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────┘
```

### /wallet/transfer - 转账

**功能合并**:
- 原 `/tools/transfer`
- 支持多代币

**交互优化**:
- 代币选择器显示余额
- 收款账户实时验证
- 扫码功能（移动端）
- 最近转账记录

### /wallet/resources - 资源管理

**功能合并**:
- 原 `/tools/stake` (抵押/赎回)
- 原 `/tools/ram` (RAM买卖)
- 原 `/ram` (RAM市场)

**页面结构**:
```
┌─ Tab ─────────────────────────────────────────────┐
│  [CPU/NET]  [RAM]                                 │
├───────────────────────────────────────────────────┤
│                                                   │
│  CPU/NET 标签页:                                  │
│  ├─ 当前抵押状态                                  │
│  ├─ 抵押/赎回表单                                 │
│  ├─ 为他人抵押记录                                │
│  └─ 赎回中资产                                    │
│                                                   │
│  RAM 标签页:                                      │
│  ├─ 当前RAM价格                                   │
│  ├─ RAM使用量                                     │
│  ├─ 买入/卖出表单                                 │
│  └─ RAM历史价格图表（可选显示）                   │
│                                                   │
└───────────────────────────────────────────────────┘
```

### /wallet/account - 账户管理

**功能合并**:
- 原 `/tools/create` (创建账户)
- 权限管理（扩展）

**子页面**:
- `/wallet/account/create` - 创建新账户
- `/wallet/account/permissions` - 权限管理（未来）

### /wallet/advanced - 高级功能

**收纳低频功能**:
- 多签管理
- 合约调用
- Ledger连接

**设计建议**: 使用卡片列表，每个功能独立卡片入口

---

## 投票模块详细设计

### /voting/producers - 节点投票（默认）

**优化点**:
- 节点列表默认显示核心信息（排名、账户、得票率）
- 点击展开查看详情（收益、节点信息）
- 已选节点浮动显示
- 投票确认弹窗显示预计收益变化

### /voting/proxy - 代理投票

**功能合并**:
- 设置代理
- 注册成为代理
- 代理人列表

### /voting/rewards - 投票收益

**功能合并**:
- 原 `/tools/votebonus` (投票分红)
- 显示收益历史

**卡片式设计**:
```
┌─────────────────────────────────────────────────┐
│  投票分红                                        │
│                                                 │
│  已抵押: 1000 FO     年化: 6%                   │
│  上次领取: 2024-01-01                           │
│  可领取: 12.3456 FO                             │
│                                                 │
│  [领取分红]                                      │
└─────────────────────────────────────────────────┘
```

---

## 浏览器模块设计

### 统一搜索入口

**全局搜索框** 放置于顶部导航栏，智能识别输入类型:

| 输入特征 | 跳转目标 |
|----------|----------|
| 纯数字12位 | 账户详情 |
| 纯数字其他 | 区块详情 |
| FO开头 | 公钥查询 |
| 64位hex | 交易详情 |
| 其他字符 | 账户详情 |

### 账户详情页优化

**信息分区**:
1. 基本信息区（账户名、创建时间）
2. 资产区（余额、抵押、锁仓）
3. 资源区（RAM/CPU/NET 使用情况）
4. 投票信息区
5. 操作历史区（分页加载）

**Tab设计**:
```
[概览]  [交易记录]  [代币]  [权限]  [合约](如有)
```

---

## 导航设计

### 顶部导航栏

```
┌────────────────────────────────────────────────────────────────────┐
│  [Logo]   [搜索框.........................]   [语言] [连接钱包]   │
└────────────────────────────────────────────────────────────────────┘
```

### 侧边导航（桌面端）

```
┌──────────────────┐
│  📊 首页          │
│  🔍 浏览器        │  ← 点击展开子菜单
│  💼 钱包          │  ← 登录后显示
│  🗳️ 投票          │
│  🖥️ 节点          │
├──────────────────┤
│  ⚙️ 设置          │
│  ❓ 帮助          │
└──────────────────┘
```

### 底部导航（移动端）

```
┌─────────────────────────────────────────────────────────┐
│  [首页]   [浏览器]   [钱包]   [投票]   [我的]          │
└─────────────────────────────────────────────────────────┘
```

---

## 路由映射表（新旧对照）

| 原路由 | 新路由 | 变更说明 |
|--------|--------|----------|
| `/` | `/` | 保持 |
| `/blocks` | `/explorer/blocks` | 归入浏览器 |
| `/blocks/:id` | `/explorer/blocks/:id` | 归入浏览器 |
| `/transactions` | `/explorer/transactions` | 归入浏览器 |
| `/transactions/:id` | `/explorer/transactions/:id` | 归入浏览器 |
| `/accounts/:id` | `/explorer/accounts/:id` | 归入浏览器 |
| `/contracts/:contract` | `/explorer/contracts/:contract` | 归入浏览器 |
| `/publickey/:key` | `/explorer/publickey/:key` | 归入浏览器 |
| `/search` | 全局搜索组件 | 不再是独立页面 |
| `/producers` | `/nodes/producers` | 归入节点 |
| `/monitor` | `/nodes/monitor` | 归入节点 |
| `/voting` | `/voting/producers` | 保持，增加子路由 |
| `/tools/transfer` | `/wallet/transfer` | 归入钱包 |
| `/tools/create` | `/wallet/account/create` | 归入钱包-账户 |
| `/tools/stake` | `/wallet/resources` | 归入钱包-资源 |
| `/tools/ram` | `/wallet/resources` | 合并到资源管理 |
| `/tools/multisig` | `/wallet/advanced/multisig` | 归入钱包-高级 |
| `/tools/ledger` | `/wallet/advanced/ledger` | 归入钱包-高级 |
| `/tools/contract` | `/wallet/advanced/contract` | 归入钱包-高级 |
| `/tools/proxy` | `/voting/proxy` | 归入投票 |
| `/tools/votebonus` | `/voting/rewards` | 归入投票 |
| `/tools/unlockfo` | `/wallet/overview` (内嵌) | 整合到资产概览 |
| `/ram` | `/wallet/resources` | 合并到资源管理 |
| `/settings` | 用户菜单 | 不再是一级导航 |
| `/wallets` | 帮助文档 | 移出主导航 |
| `/links` | Footer | 移到页脚 |

---

## 权限与状态设计

### 钱包连接状态

```typescript
type WalletState =
  | 'disconnected'     // 未连接
  | 'connecting'       // 连接中
  | 'connected'        // 已连接
  | 'error'            // 连接错误

type WalletType =
  | 'scatter'
  | 'anchor'
  | 'ledger'
  | 'mathwallet'
```

### 页面访问控制

| 模块 | 未登录 | 已登录 |
|------|--------|--------|
| 首页 | ✓ | ✓ |
| 浏览器 | ✓ | ✓ |
| 节点 | ✓ | ✓ |
| 钱包 | 显示连接提示 | ✓ |
| 投票（查看） | ✓ | ✓ |
| 投票（操作） | 提示登录 | ✓ |

---

## 移动端适配要点

### 页面布局变化

| 功能 | 桌面端 | 移动端 |
|------|--------|--------|
| 导航 | 侧边栏 | 底部Tab |
| 资源状态栏 | 横向5列 | 纵向卡片 |
| 表单 | 多列 | 单列 |
| 表格 | 横向滚动 | 卡片列表 |

### 移动端专属功能

- 扫码转账
- 下拉刷新
- 手势返回

---

## 优先级排序（开发顺序建议）

### Phase 1: 核心功能
1. 首页（数据概览）
2. 浏览器（区块/交易/账户）
3. 钱包连接
4. 转账功能

### Phase 2: 资源管理
5. 资产概览
6. 资源管理（RAM/CPU/NET）
7. 锁仓解锁

### Phase 3: 投票系统
8. BP投票
9. 投票分红
10. 代理投票

### Phase 4: 高级功能
11. 多签管理
12. 合约调用
13. Ledger支持

### Phase 5: 增强功能
14. 节点监控
15. 移动端优化
16. PWA支持
